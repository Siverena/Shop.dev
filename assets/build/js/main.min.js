import{productsDataList}from"./modules/productsdata.min.js";!function(){if(!document.querySelector(".products__wrap"))return;let e=(()=>{let e=window.location.search;if(!e)return;let t=new Object;e=e.substring(1).split("&");for(let a=0;a<e.length;a++){let r=e[a].split("=");t[r[0]]=r[1]}return t})(),t=e=>{let t=document.createElement("li");t.dataset.id=e.id,t.className="products__item  product";let a=document.createElement("div");a.classList.add("product__image-wrap");let r=document.createElement("img");r.src=`./img/product/${e.img[0]}`,r.alt=e.name,r.setAttribute("width","360"),r.setAttribute("height","420");let l=document.createElement("div");l.classList.add("product__add-to-box-wrap");let c=document.createElement("button");c.classList.add("product__add-to-box-btn");let n=document.createElement("footer");n.classList.add("product__footer");let i=document.createElement("a");i.classList.add("product__link");let o=document.createElement("h3");o.classList.add("product__name");let d=document.createElement("p");d.classList.add("product__description");let s=document.createElement("p");return s.classList.add("product__price"),o.textContent=e.name,d.textContent=e.descr,s.textContent=`$${e.price.toFixed(2)}`,i.href=`product-page.html?id=${e.id}`,i.append(o,d,s),n.append(i),c.textContent="Add to Cart",l.appendChild(c),a.append(r,l),t.append(a,n),t},a=document.querySelector(".products__wrap"),r=0;switch(window.location.pathname){case"/index.html":r=6;break;case"/catalog-page.html":r=9;break;case"/product-page.html":r=3;break;default:r=0}let l=e=>{e.preventDefault();let t=e.target.parentNode.querySelectorAll("input:checked"),a={id:c.id,color:"black",size:"m",price:c.price,quantity:1};t.forEach((e=>{"color"===e.name&&(a.color=e.id),"size"===e.name&&(a.size=e.id),"quantity"===e.name&&(a.quantity=+e.parentNode.lastChild.data)})),(e=>{let t=Array();localStorage.cart&&(t=JSON.parse(localStorage.cart)),t.push(e),localStorage.cart=JSON.stringify(t),setCartCounter()})(a)};((e,a,r=0,l=0)=>{let c=0,n=r;if(0===r)e.forEach((e=>{a.appendChild(t(e))}));else{l>0&&(c=r*(l-1),n=r*l),e.length<r&&(r=e.length);for(let r=c;r<n;r++)a.appendChild(t(e[r]))}})(productsDataList,a,r,0),document.querySelectorAll(".item__add-to-box-btn").forEach((e=>{e.addEventListener("click",l)}));let c=productsDataList[0];e&&e.id&&(c=productsDataList[e.id]),((e=productsDataList[0])=>{if("/product-page.html"!==window.location.pathname)return;let t=document.querySelector(".slider__item__cont");t.innerHTML="",e.img.forEach(((a,r)=>{let l=document.createElement("div");l.classList.add("slider__item"),0===r&&l.classList.add("slider__item--active");let c=document.createElement("img");c.src=`img/product/${a}`,c.className="slider__image",c.width=597,c.height=724,c.alt=e.name,l.append(c),t.append(l)}));let a=document.querySelector(".item__description");a.dataset.id=e.id,a.querySelector(".item__category").textContent=e.category,a.querySelector(".item__name").textContent=e.name,a.querySelector(".item__text").textContent=e.descr,a.querySelector(".item__cost").textContent="$"+e.price})(c)}(),function(){let e=document.querySelector(".slider");if(console.log(e),e){let t=e.querySelectorAll(".slider__item"),a=e.querySelector(".slider__link--prew");e.querySelector(".slider__link--next").addEventListener("click",(()=>{!function(e){for(let t=0;t<e.length;t++)e[t].classList.contains("slider__item--active")&&(e[t].classList.remove("slider__item--active"),t==e.length-1?e[0].classList.add("slider__item--active"):e[t+1].classList.add("slider__item--active"),t=e.length)}(t)})),a.addEventListener("click",(()=>{!function(e){for(let t=0;t<e.length;t++)e[t].classList.contains("slider__item--active")&&(e[t].classList.remove("slider__item--active"),0==t?e[e.length-1].classList.add("slider__item--active"):e[t-1].classList.add("slider__item--active"),t=e.length)}(t)}))}}();let setCartCounter=()=>{let e=document.querySelector(".cart-link__count");localStorage.cart?(e.textContent=JSON.parse(localStorage.cart).length,e.classList.remove("visually-hidden")):(e.textContent="",e.classList.add("visually-hidden"))};!function(){let e,t,a,r;document.querySelector("#clear-cart-btn")&&(e=document.querySelector("#clear-cart-btn")),document.querySelector(".cart")&&(t=document.querySelector(".cart"));let l=()=>{let e;if(!localStorage.cart)return 0;let t=0;return e=JSON.parse(localStorage.cart),e.forEach((e=>{t+=e.price*e.quantity})),t},c=(e,t)=>{let a=productsDataList.find((t=>t.id===e.id)),r=document.createElement("li");r.dataset.id=e.id,r.className="cart__item goods";let l=document.createElement("img");l.src=`img/product/${a.img[0]}`,l.alt=a.name,l.setAttribute("width","262"),l.setAttribute("height","306"),l.className="goods__img";let c=document.createElement("div");c.className="goods__description";let n=document.createElement("a");n.className="goods__name",n.href=`product-page.html?id=${e.id}`,n.innerHTML=a.name;let i=document.createElement("p");i.className="goods__text goods__text--price",i.innerText="Price: ";let o=document.createElement("span");o.innerText=`$${a.price}`,i.append(o);let d=document.createElement("p");d.className="goods__text",d.innerText="Color: ";let s=document.createElement("span");s.innerText=e.color,d.append(s);let u=document.createElement("p");u.className="goods__text",u.innerText="Size: ";let m=document.createElement("span");m.innerText=e.size,u.append(m);let p=document.createElement("div");p.className="goods__input-wrap";let _=document.createElement("label");_.className="goods__quantity",_.htmlFor=`quantity${t}`,_.innerText="Quantity:";let g=document.createElement("input");g.id=`quantity${t}`,g.name=`quantity${t}`,g.type="number",g.value=e.quantity,p.append(_,g);let h=document.createElement("button");h.className="goods__delete";let S=document.createElement("span");return S.className="visually-hidden",S.innerText="Удалить",h.append(S),c.append(n,i,d,u,p,h),r.append(l,c),r},n=e=>{let a={id:e.target.id,value:e.target.value};a.id.match(/quantity/i)&&(a.type="quantity",a.value=parseInt(a.value));let r=JSON.parse(localStorage.cart);r[e.currentTarget.dataset.cin][a.type]=a.value,localStorage.cart=JSON.stringify(r),i(r,t)},i=(e,t)=>{for(;t.firstElementChild&&!t.firstElementChild.classList.contains("cart__button-wrap");)t.removeChild(t.firstElementChild);for(let a=0;a<e.length;a++){let r=t.insertBefore(c(e[a],a),t.querySelector(".cart__button-wrap"));r.dataset.cin=a,r.addEventListener("click",o),r.addEventListener("change",n)}setCartCounter(),((e=0)=>{let t=l();a.textContent=`$${t}`,r.textContent=`$${(t*(1-e/100)).toFixed(2)}`})()},o=e=>{e.target.classList.contains("goods__delete")&&(e.preventDefault(),(e=>{let a=JSON.parse(localStorage.cart);a.splice(e,1),localStorage.cart=JSON.stringify(a),i(a,t)})(e.currentTarget.dataset.cin))},d=e=>{e.preventDefault(),localStorage.clear(),i("",t,0)};if("/cart-page.html"===window.location.pathname){let e=document.querySelector(".cart");a=document.querySelector(".checkout__grand span"),r=document.querySelector(".checkout__sub span"),localStorage.cart?i(JSON.parse(localStorage.cart),e):i("",e),l()}else setCartCounter();e&&e.addEventListener("click",d),window.onclose=()=>{localStorage.clear()}}();
//# sourceMappingURL=main.min.js.map
